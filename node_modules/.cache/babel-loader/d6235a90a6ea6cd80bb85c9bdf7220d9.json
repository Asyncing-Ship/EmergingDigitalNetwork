{"ast":null,"code":"var _jsxFileName = \"/home/scoundrel/Desktop/eda-solo/edn-solo-project/src/Components/PostList/PostItem/PostItem.js\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Flex, Box, Button, Heading, Text, IconButton, Stack } from \"@chakra-ui/core\";\nimport AddComment from \"../../Comment/AddComment\";\nimport Thread from \"../../Thread/PostThread\";\nimport Axios from \"axios\";\n\nclass PostItem extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      comments: 0\n    };\n\n    this.setDetails = () => {\n      const SET_POST_DETAIL = {\n        comments: this.state.comments,\n        post: this.props.postItem\n      };\n      this.props.dispatch({\n        type: \"SET_POST_DETAIL\",\n        payload: SET_POST_DETAIL\n      });\n\n      try {\n        this.history.push(\"/posts/\".concat(this.props.postItem.id));\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.deletePost = event => {\n      console.log(\"In delete\");\n      this.props.dispatch({\n        type: \"DELETE_POST\",\n        payload: event.target.id\n      });\n\n      try {\n        this.props.dispatch({\n          type: \"FETCH_POSTS\"\n        });\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.props.history.push(\"/\");\n    };\n\n    this.addPostComment = event => {};\n\n    this.addPostLike = event => {};\n\n    this.editPost = event => {};\n  }\n\n  // this.props.dispatch({\n  //   type: \"FETCH_POST_COMMENTS\",\n  //   payload: this.props.postItem.id,\n  // });\n  componentDidMount() {\n    Axios.get(\"api/posts/comments/\".concat(this.props.postItem.id)).then(result => {\n      console.table(result.data);\n      this.setState({\n        comments: result.data\n      });\n    }).catch(error => console.log(\"error getting comments\", error));\n  } // addPostLike = () => {\n  //   //\n  // };\n  // Axios.delete(`/api/posts/${event.target.id}`)\n\n\n  render() {\n    if (this.props.user.id === this.props.postItem.user_id) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Router, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/posts/\".concat(this.props.postItem.id),\n        component: Thread,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(Flex, {\n        width: \"full\",\n        justifyContent: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Box, {\n        m: 4,\n        textAlign: \"center\",\n        borderWidth: 1,\n        borderRadius: \"lg\",\n        px: 4,\n        width: \"full\",\n        maxWidth: \"100%\",\n        boxShadow: \"lg\",\n        p: 4,\n        py: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Heading, {\n        as: \"h3\",\n        size: \"lg\",\n        mb: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }\n      }, this.props.postItem.post_title), /*#__PURE__*/React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 15\n        }\n      }, \"By\"), /*#__PURE__*/React.createElement(Heading, {\n        mb: 2,\n        as: \"h5\",\n        size: \"sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 15\n        }\n      }, this.props.postItem.first_name), /*#__PURE__*/React.createElement(Text, {\n        mb: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }\n      }, this.props.postItem.post_body), /*#__PURE__*/React.createElement(Stack, {\n        isInline: true,\n        width: \"full\",\n        justifyContent: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Text, {\n        p: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }\n      }, this.props.postItem.likes, \" Likes\"), /*#__PURE__*/React.createElement(Link, {\n        to: \"/posts/\".concat(this.props.postItem.id),\n        p: 2,\n        onClick: this.setDetails,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }\n      }, this.state.comments.length, \" Comments\")), /*#__PURE__*/React.createElement(Button, {\n        m: 1,\n        id: this.props.postItem.id,\n        onClick: this.addPostLike,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }, \"Like\"), /*#__PURE__*/React.createElement(Button, {\n        m: 1,\n        id: this.props.postItem.id,\n        onClick: this.editPost,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }\n      }, \"Edit\"), /*#__PURE__*/React.createElement(Button, {\n        m: 1,\n        id: this.props.postItem.id,\n        onClick: this.deletePost,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }\n      }, \"Delete\"), /*#__PURE__*/React.createElement(AddComment, {\n        postItem: this.props.postItem,\n        userID: this.props.user.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 15\n        }\n      }))));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Router, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/posts/\".concat(this.props.postItem.id),\n        component: /*#__PURE__*/React.createElement(Thread, {\n          postItem: this.props.postItem,\n          comments: this.state.comments,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 19\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(Flex, {\n        width: \"full\",\n        justifyContent: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Box, {\n        m: 4,\n        textAlign: \"center\",\n        borderWidth: 1,\n        borderRadius: \"lg\",\n        px: 4,\n        width: \"full\",\n        maxWidth: \"100%\",\n        boxShadow: \"lg\",\n        p: 4,\n        py: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Heading, {\n        as: \"h3\",\n        size: \"lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 15\n        }\n      }, this.props.postItem.post_title), /*#__PURE__*/React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }\n      }, \"By\"), /*#__PURE__*/React.createElement(Heading, {\n        mb: 2,\n        as: \"h5\",\n        size: \"sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }\n      }, this.props.postItem.first_name), /*#__PURE__*/React.createElement(Stack, {\n        isInline: true,\n        width: \"full\",\n        justifyContent: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Text, {\n        p: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 17\n        }\n      }, this.props.postItem.likes, \" Likes\"), /*#__PURE__*/React.createElement(Link, {\n        to: \"/posts/\".concat(this.props.postItem.id),\n        p: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }\n      }, this.state.comments.length, \" Comments\")), /*#__PURE__*/React.createElement(Button, {\n        m: 1,\n        id: this.props.postItem.id,\n        onClick: this.addPostLike,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }\n      }, \"Like\"), /*#__PURE__*/React.createElement(AddComment, {\n        postItem: this.props.postItem,\n        userID: this.props.user.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 15\n        }\n      }))));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.user\n});\n\nexport default withRouter(connect(mapStateToProps)(PostItem));","map":{"version":3,"sources":["/home/scoundrel/Desktop/eda-solo/edn-solo-project/src/Components/PostList/PostItem/PostItem.js"],"names":["React","Component","withRouter","BrowserRouter","Router","Route","Link","connect","Flex","Box","Button","Heading","Text","IconButton","Stack","AddComment","Thread","Axios","PostItem","state","comments","setDetails","SET_POST_DETAIL","post","props","postItem","dispatch","type","payload","history","push","id","error","console","log","deletePost","event","target","addPostComment","addPostLike","editPost","componentDidMount","get","then","result","table","data","setState","catch","render","user","user_id","post_title","first_name","post_body","likes","length","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport {\n  Flex,\n  Box,\n  Button,\n  Heading,\n  Text,\n  IconButton,\n  Stack,\n} from \"@chakra-ui/core\";\nimport AddComment from \"../../Comment/AddComment\";\nimport Thread from \"../../Thread/PostThread\";\nimport Axios from \"axios\";\n\nclass PostItem extends Component {\n  state = {\n    comments: 0,\n  };\n\n  setDetails = () => {\n    const SET_POST_DETAIL = {\n      comments: this.state.comments,\n      post: this.props.postItem,\n    };\n    this.props.dispatch({\n      type: \"SET_POST_DETAIL\",\n      payload: SET_POST_DETAIL,\n    });\n    try {\n      this.history.push(`/posts/${this.props.postItem.id}`);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  // this.props.dispatch({\n  //   type: \"FETCH_POST_COMMENTS\",\n  //   payload: this.props.postItem.id,\n  // });\n\n  componentDidMount() {\n    Axios.get(`api/posts/comments/${this.props.postItem.id}`)\n      .then((result) => {\n        console.table(result.data);\n        this.setState({\n          comments: result.data,\n        });\n      })\n      .catch((error) => console.log(\"error getting comments\", error));\n  }\n\n  // addPostLike = () => {\n  //   //\n  // };\n\n  // Axios.delete(`/api/posts/${event.target.id}`)\n\n  deletePost = (event) => {\n    console.log(\"In delete\");\n    this.props.dispatch({ type: \"DELETE_POST\", payload: event.target.id });\n    try {\n      this.props.dispatch({ type: \"FETCH_POSTS\" });\n    } catch (error) {\n      console.log(error);\n    }\n    this.props.history.push(\"/\");\n  };\n\n  addPostComment = (event) => {};\n\n  addPostLike = (event) => {};\n\n  editPost = (event) => {};\n\n  render() {\n    if (this.props.user.id === this.props.postItem.user_id) {\n      return (\n        <div>\n          <Router>\n            <div>\n              <Route\n                exact\n                path={`/posts/${this.props.postItem.id}`}\n                component={Thread}\n              />\n            </div>\n          </Router>\n          <Flex width=\"full\" justifyContent=\"center\">\n            <Box\n              m={4}\n              textAlign=\"center\"\n              borderWidth={1}\n              borderRadius=\"lg\"\n              px={4}\n              width=\"full\"\n              maxWidth=\"100%\"\n              boxShadow=\"lg\"\n              p={4}\n              py={8}\n            >\n              {/* <div className=\"postItem\"> */}\n              <Heading as=\"h3\" size=\"lg\" mb={2}>\n                {this.props.postItem.post_title}\n              </Heading>\n              <Text>By</Text>\n              <Heading mb={2} as=\"h5\" size=\"sm\">\n                {this.props.postItem.first_name}\n              </Heading>\n              <Text mb={8}>{this.props.postItem.post_body}</Text>\n              <Stack isInline width=\"full\" justifyContent=\"center\">\n                <Text p={2}>{this.props.postItem.likes} Likes</Text>\n                <Link\n                  to={`/posts/${this.props.postItem.id}`}\n                  p={2}\n                  onClick={this.setDetails}\n                >\n                  {this.state.comments.length} Comments\n                </Link>\n              </Stack>\n              <Button\n                m={1}\n                id={this.props.postItem.id}\n                onClick={this.addPostLike}\n              >\n                Like\n              </Button>\n              <Button m={1} id={this.props.postItem.id} onClick={this.editPost}>\n                Edit\n              </Button>\n              <Button\n                m={1}\n                id={this.props.postItem.id}\n                onClick={this.deletePost}\n              >\n                Delete\n              </Button>\n              <AddComment\n                postItem={this.props.postItem}\n                userID={this.props.user.id}\n              />\n            </Box>\n          </Flex>\n        </div>\n      );\n    } else {\n      return (\n        <div>\n          <Router>\n            <div>\n              <Route\n                exact\n                path={`/posts/${this.props.postItem.id}`}\n                component={\n                  <Thread\n                    postItem={this.props.postItem}\n                    comments={this.state.comments}\n                  />\n                }\n              />\n            </div>\n          </Router>\n          <Flex width=\"full\" justifyContent=\"center\">\n            <Box\n              m={4}\n              textAlign=\"center\"\n              borderWidth={1}\n              borderRadius=\"lg\"\n              px={4}\n              width=\"full\"\n              maxWidth=\"100%\"\n              boxShadow=\"lg\"\n              p={4}\n              py={8}\n            >\n              <Heading as=\"h3\" size=\"lg\">\n                {this.props.postItem.post_title}\n              </Heading>\n              <Text>By</Text>\n              <Heading mb={2} as=\"h5\" size=\"sm\">\n                {this.props.postItem.first_name}\n              </Heading>\n              <Stack isInline width=\"full\" justifyContent=\"center\">\n                <Text p={2}>{this.props.postItem.likes} Likes</Text>\n                <Link to={`/posts/${this.props.postItem.id}`} p={2}>\n                  {this.state.comments.length} Comments\n                </Link>\n              </Stack>\n              <Button\n                m={1}\n                id={this.props.postItem.id}\n                onClick={this.addPostLike}\n              >\n                Like\n              </Button>\n              <AddComment\n                postItem={this.props.postItem}\n                userID={this.props.user.id}\n              />\n            </Box>\n          </Flex>\n        </div>\n      );\n    }\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n});\n\nexport default withRouter(connect(mapStateToProps)(PostItem));\n"]},"metadata":{},"sourceType":"module"}